webpackJsonp([2],{"5zde":function(t,e,o){o("zQR9"),o("qyJz"),t.exports=o("FeBl").Array.from},Gu7T:function(t,e,o){"use strict";e.__esModule=!0;var n,r=o("c/Tr"),s=(n=r)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return(0,s.default)(t)}},"c/Tr":function(t,e,o){t.exports={default:o("5zde"),__esModule:!0}},fBQ2:function(t,e,o){"use strict";var n=o("evD5"),r=o("X8DO");t.exports=function(t,e,o){e in t?n.f(t,e,r(0,o)):t[e]=o}},m2wG:function(t,e){},pjeT:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Gu7T"),r=o.n(n),s=o("Xxa5"),a=o.n(s),i=o("exGp"),c=o.n(i),u=o("WIMx"),f=o("gyMJ"),l={data:function(){return{books:[],offset:0,hasMore:!0,isLoading:!1}},created:function(){this.getData()},methods:{loadmore:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){var e=t.$refs.scroll;e.scrollTop+e.clientHeight+20>e.scrollHeight&&t.getData()},60)},more:function(){this.getData()},rmbook:function(t){var e=this;return c()(a.a.mark(function o(){return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(f.e)(t);case 2:e.getData();case 3:case"end":return o.stop()}},o,e)}))()},getData:function(){var t=this;return c()(a.a.mark(function e(){var o,n,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasMore||t.isLoading){e.next=11;break}return t.isLoading=!0,e.next=4,Object(f.d)(t.offset);case 4:o=e.sent,n=o.hasMore,s=o.books,t.books=[].concat(r()(t.books),r()(s)),t.hasMore=n,t.isLoading=!1,t.offset=t.books.length;case 11:case"end":return e.stop()}},e,t)}))()}},mounted:function(){var t=this,e=this.$refs.scroll,o=e.offsetTop,n=0;e.addEventListener("touchstart",function(r){if(0==e.scrollTop||e.offsetTop==o){var s=r.touches[0].pageY,a=function t(r){var a=r.touches[0].pageY;(n=a-s)>0?n<=50?e.style.top=n+o+"px":(n=50,e.style.top=o+50+"px"):(e.removeEventListener("touchmove",t),e.removeEventListener("touchend",i))},i=function r(s){clearInterval(t.timer1),t.timer1=setInterval(function(){if(n<=0)return clearInterval(t.timer1),n=0,e.addEventListener("touchmove",a),e.addEventListener("touchend",r),e.style.top=o+"px",t.books=[],t.offset=0,void t.getData();n-=1,e.style.top=o+n+"px"},1)};e.addEventListener("touchmove",a),e.addEventListener("touchend",i)}},!1)},components:{mheader:u.a}},v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("mheader",[t._v("列表页")]),t._v(" "),o("div",{ref:"scroll",staticClass:"content",on:{scroll:t.loadmore}},[o("ul",t._l(t.books,function(e,n){return o("router-link",{key:n,attrs:{to:"/detail/"+e.bookId,tag:"li"}},[o("img",{attrs:{src:e.bookCover}}),t._v(" "),o("div",[o("h4",[t._v(t._s(e.bookName))]),t._v(" "),o("p",[t._v(t._s(e.bookInfo))]),t._v(" "),o("b",[t._v(t._s(e.bookPrice))]),t._v(" "),o("button",{on:{click:function(o){o.stopPropagation(),t.rmbook(e.bookId)}}},[t._v("删除")])])])})),t._v(" "),o("div",{staticClass:"more",on:{click:t.more}},[t._v("点我加载更多。。。")])])],1)},staticRenderFns:[]};var d=o("VU/8")(l,v,!1,function(t){o("m2wG")},"data-v-2f87d65c",null);e.default=d.exports},qyJz:function(t,e,o){"use strict";var n=o("+ZMJ"),r=o("kM2E"),s=o("sB3e"),a=o("msXi"),i=o("Mhyx"),c=o("QRG4"),u=o("fBQ2"),f=o("3fs2");r(r.S+r.F*!o("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,o,r,l,v=s(t),d="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,p=void 0!==m,_=0,g=f(v);if(p&&(m=n(m,h>2?arguments[2]:void 0,2)),void 0==g||d==Array&&i(g))for(o=new d(e=c(v.length));e>_;_++)u(o,_,p?m(v[_],_):v[_]);else for(l=g.call(v),o=new d;!(r=l.next()).done;_++)u(o,_,p?a(l,m,[r.value,_],!0):r.value);return o.length=_,o}})}});
//# sourceMappingURL=2.6d3dc73eac5afa9e3b0f.js.map